## ストリーム

QUICのストリームは軽量で到達順序を保証するバイトストリームの概念を提供します。
QUICには2種類の基本的なストリームが存在します。

- 通信の開始者が対向側にデータを1方向に転送する単方向ストリーム
- 相互にデータを転送できる双方向ストリーム

どちら側の端末も、両方のストリームを作成でき、交互に配置した複数ストリームのデータを並行で送信したり中止したりできます。
QUICコネクションでデータを転送するとき、1つ以上のストリームが使用されます。

### フロー制御

フロー制御はストリームごとに独立して行われます。
それにより、端末はメモリの割当量を制限したり、バックプレッシャーをかけたりすることができます。
ストリームの作成も同様にフロー制御が行われ、各端末はそのときに受け入れを許可するストリームIDの最大値を宣言します。

### ストリーム識別子

ストリームは62 bitの符号なし整数により識別されます。これをストリームIDと呼びます。
ストリームIDの下位2 bitはストリームの種類（単方向または双方向）とストリームの開始者の識別に使用されます。

ストリームIDの最下位bit（0x1）は、ストリームの開始者を識別します。
クライアントは偶数IDのストリームを開始し（これらは最下位bitが0に設定されます）、サーバーは奇数IDのストリームを開始します（これらは最下位bitが1に設定されます）。
ストリームIDの下位2bit目（0x2）は、単方向ストリームと双方向ストリームを区別します。
単方向ストリームではこのbitは常に1に設定され、双方向ストリームでは0に設定されます。

### ストリームの並行性

QUICでは任意の数のストリームを並行で使用することができます。端末はストリームIDの最大値を制限することにより、並行して受信できる入力ストリームの個数を制限できます。
ストリームIDの最大値は端末ごとに設定でき、設定を受け取った対向側にのみ適用されます。

### データの送受信

エンドポイントはデータの送受信にストリームを利用します。それがつまるところストリームの目的です。
ストリームは到達順序を保証するバイトストリームの概念です。
別々のストリームは必ずしも元の順序で配信されるとは限りません。

### ストリームの優先制御

ストリームに対するリソース割り当ての優先制御を正しく行うことで、ストリームの多重化はアプリケーションのパフォーマンスに大きな効果を与えます。
HTTP/2のような、他の多重化を行うプロトコルでの経験から、効果的な優先制御の戦略はパフォーマンスに大きなプラスの影響をもたらします。

QUIC自身は優先順位の情報を交換するフレームを持ちません。そのかわり、QUICを使用するアプリケーションから得た優先順位の情報を信頼します。
QUICを使用するプロトコルはそのアプリケーションのセマンティクスに合う優先制御のスキームを定義することが出来ます。
HTTP/3をQUIC上で使用する場合、優先制御はHTTPレイヤーで行われます。
