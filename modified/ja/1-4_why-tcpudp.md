## TCPかUDPか

TCPを使う限りhead-of-lineブロッキングを改善できないのであれば、理論上、ネットワークスタックにTCPとUDPに次ぐトランスポートプロトコルを作るべきです。もしくは[SCTP](https://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)さえ使うべきかもしれません。SCTPはIETFが[RFC 4960](https://tools.ietf.org/html/rfc4960)により標準化したトランスポートプロトコルで、望まれるいくつかの特徴を持っています。

しかし、新規のトランスポートプロトコルを作る近年の取り組みは、ほとんどすべてが休止しています。
なぜなら、それらをインターネット上で実際に使用することが困難だからです。
新しいプロトコルの使用は、クライアントとサーバーの間のネットワーク上に設置されている、TCPまたはUDPのみを許可する多数のミドルボックス[^1-4_1]より阻まれてきました。
新たなトランスポートプロトコルを導入することは、N%のコネクションを失敗させることになります。何故なら、ミドルボックスはUDPまたはTCPではない通信を悪意のあるものや間違っているものと判断しブロックするからです。多くの場合、N%は努力してみるには高すぎる失敗率とみなされます。

[^1-4_1]: ファイアウォール、NAT、ルーターなど

加えて、ネットワークスタックのトランスポートプロトコルを変更することは、一般的にOSのカーネルに実装されているプロトコルを変更することを意味します。
OSのカーネルを更新して展開することは、多大な努力を必要とする時間のかかるプロセスです。IETFにより標準化された多くのTCPの改善案は、広くサポートされていないため、普及していません。

### なぜSCTP over UDPではないか

SCTPはストリームを持つ信頼性のあるプロトコルで、WebRTCにはUDPを使用する実装も存在します。
しかし、以下を含むいくつかの理由により、これはQUICの代替として十分ではありませんでした。

- SCTPがストリームのhead-of-lineブロッキングの問題を解決しないこと
- SCTPではコネクションの作成時にストリームの数を決めなければならないこと
- SCTPは確かなTLS/securityのレイヤーを持たないこと
- SCTPは4-wayハンドシェイクを使用すること（QUICは0-RTTを提供する）
- SCTPはメッセージベースで、QUICはTCPと同様にバイトストリームであること
- SCTPはQUICとは異なり、IPアドレスの変化に対応できないこと

SCTPとQUICの違いをより知るには、『[A Comparison between SCTP and QUIC](https://tools.ietf.org/html/draft-joseph-quic-comparison-quic-sctp-00)』インターネットドラフトが参考になるでしょう。
