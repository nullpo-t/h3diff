## HTTP/3におけるサーバープッシュ

HTTP/3のサーバープッシュはHTTP/2（[RFC 7540](https://tools.ietf.org/html/rfc7540)）で説明されているものと似ていますが、異なるメカニズムを使用します。
サーバープッシュとは、クライアントからのリクエストなしにレスポンスを送信する機能です。
クライアントが合意した場合のみ、サーバープッシュを行うことができます。
HTTP/3では、クライアントはサーバーに対してプッシュストリームIDの最大値を通知することで、受け入れ可能なプッシュの個数を制限することができます。この制限を超えるとコネクションエラーを引き起こします。

サーバーは、まだクライアントから要求されていないがやがて必要になるであろうリソースがあると判断した場合、レスポンスがプッシュであることを示す `PUSH_PROMISE` フレームをリクエストに使用されたストリームで送信し、その後実際のレスポンスを新しいストリームで送信することができます。
クライアントは、あらかじめプッシュを受け入れることを通知していたとしても、それが適切だと考えたときに、個別のプッシュストリームをキャンセルすることができます。その際、 `CANCEL_PUSH` フレームをサーバーに送信します。

### 問題点

サーバープッシュはHTTP/2の開発当初に議論され、プロトコル策定後、インターネット上に展開されたにもかかわらず、
今もなおその有用性について数え切れないほどの議論が行われ、叩かれ嫌われ続けています。
プッシュは決して「タダ」ではありません。ラウンドトリップの半分を削減するとはいえ、それでも帯域幅を消費します。
リソースが実際にプッシュされるべきかどうかを、サーバー側が高い確信を持って判断することは、大抵の場合難しいか、不可能です。
